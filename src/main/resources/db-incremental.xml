<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="02.07.2017 17:40" author="mposhatov">
        <createTable tableName="CLIENT">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="java.sql.Types.VARCHAR(20)">
                <constraints unique="true" uniqueConstraintName="UC_CLIENT_1"/>
            </column>
            <column name="PASSWORD" type="java.sql.Types.VARCHAR(20)"/>
            <column name="PHOTO" type="java.sql.Types.BLOB"/>
        </createTable>
    </changeSet>

    <changeSet id="02.07.2017 17:42" author="mposhatov">
        <createTable tableName="ROLE">
            <column name="CLIENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="ROLE" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="05.07.2017 17:53" author="mposhatov">
        <createTable tableName="NOT_FREE_QUESTS_OF_CLIENTS">
            <column name="CLIENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="QUEST_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="05.07.2017 18:58" author="mposhatov">
        <createTable tableName="COMPLETED_QUESTS_OF_CLIENTS">
            <column name="CLIENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="QUEST_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="03.07.2017 16:40" author="mposhatov">
        <createTable tableName="QUEST">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="java.sql.Types.VARCHAR(50)"/>
            <column name="DESCRIPTION" type="java.sql.Types.VARCHAR(1000)"/>
            <column name="APPROVED" type="java.sql.Types.BOOLEAN"/>
            <column name="FREE" type="java.sql.Types.BOOLEAN"/>
            <column name="COST_USD" type="java.sql.Types.FLOAT(2)"/>
            <column name="START_STEP_ID" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="03.07.2017 16:43" author="mposhatov">
        <createTable tableName="STEP">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="DESCRIPTION" type="java.sql.Types.VARCHAR(4000)"/>
            <column name="QUEST_ID" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="03.07.2017 16:51" author="mposhatov">
        <createTable tableName="ANSWER">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="DESCRIPTION" type="java.sql.Types.VARCHAR(300)"/>
            <column name="STEP_ID" type="java.sql.Types.BIGINT"/>
            <column name="NEXT_STEP_ID" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 16:46" author="mposhatov">
        <createTable tableName="SUBJECT">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="java.sql.Types.VARCHAR(20)"/>
            <column name="VALUE" type="java.sql.Types.VARCHAR(20)"/>
            <column name="DESCRIPTION" type="java.sql.Types.VARCHAR(100)"/>
            <column name="NUMBER" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 17:57" author="mposhatov">
        <createTable tableName="REQUIREMENT_EVENTS_OF_ANSWERS">
            <column name="EVENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_REQUIREMENT_EVENTS_OF_ANSWERS_1"/>
            </column>
            <column name="ANSWER_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_REQUIREMENT_EVENTS_OF_ANSWERS_2"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 17:58" author="mposhatov">
        <createTable tableName="REQUIREMENT_SUBJECTS_OF_ANSWERS">
            <column name="SUBJECT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_REQUIREMENT_SUBJECTS_OF_ANSWERS_1"/>
            </column>
            <column name="ANSWER_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_REQUIREMENT_SUBJECTS_OF_ANSWERS_2"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 18:13" author="mposhatov">
        <createTable tableName="GIVING_EVENTS_OF_ANSWERS">
            <column name="EVENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_GIVING_EVENTS_OF_ANSWERS_1"/>
            </column>
            <column name="ANSWER_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_GIVING_EVENTS_OF_ANSWERS_1"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 18:14" author="mposhatov">
        <createTable tableName="GIVING_SUBJECTS_OF_ANSWERS">
            <column name="SUBJECT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_GIVING_SUBJECTS_OF_ANSWERS_1"/>
            </column>
            <column name="ANSWER_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_GIVING_SUBJECTS_OF_ANSWERS_1"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="05.07.12:23 12:23" author="mposhatov">
        <createTable tableName="SUBJECTS_OF_ACTIVE_GAME">
            <column name="SUBJECT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_SUBJECTS_OF_ACTIVE_GAME_1"/>
            </column>
            <column name="ACTIVE_GAME_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_SUBJECTS_OF_ACTIVE_GAME_2"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="05.07.12:23 12:24" author="mposhatov">
        <createTable tableName="EVENTS_OF_ACTIVE_GAME">
            <column name="EVENT_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_EVENTS_OF_ACTIVE_GAME_1"/>
            </column>
            <column name="ACTIVE_GAME_ID" type="java.sql.Types.BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_EVENTS_OF_ACTIVE_GAME_2"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 17:03" author="mposhatov">
        <createTable tableName="EVENT">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="NAME" type="java.sql.Types.VARCHAR(20)"/>
            <column name="VALUE" type="java.sql.Types.VARCHAR(20)"/>
            <column name="DESCRIPTION" type="java.sql.Types.VARCHAR(100)"/>
            <column name="NUMBER" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 17:17" author="mposhatov">
        <createTable tableName="ACTIVE_GAME">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="CLIENT_ID" type="java.sql.Types.BIGINT"/>
            <column name="QUEST_ID" type="java.sql.Types.BIGINT"/>
            <column name="CREATED_AT" type="java.sql.Types.DATE"/>
        </createTable>
    </changeSet>

    <changeSet id="04.07.2017 17:19" author="mposhatov">
        <createTable tableName="CLOSED_GAME">
            <column name="ID" type="java.sql.Types.BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="CLIENT_ID" type="java.sql.Types.BIGINT"/>
            <column name="QUEST_ID" type="java.sql.Types.BIGINT"/>
            <column name="TOTAL_TIME_SEC" type="java.sql.Types.BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet id="02.07.2017 17:46" author="mposhatov">
        <insert tableName="CLIENT">
            <column name="NAME">op1</column>
            <column name="PASSWORD">op1</column>
        </insert>

        <insert tableName="ROLE">
            <column name="CLIENT_ID">1</column>
            <column name="ROLE">1</column>
        </insert>
    </changeSet>

    <changeSet id="02.07.2017 17:48" author="mposhatov">
        <insert tableName="CLIENT">
            <column name="NAME">admin</column>
            <column name="PASSWORD">admin</column>
        </insert>

        <insert tableName="ROLE">
            <column name="CLIENT_ID">2</column>
            <column name="ROLE">1</column>
        </insert>
        <insert tableName="ROLE">
            <column name="CLIENT_ID">2</column>
            <column name="ROLE">2</column>
        </insert>
    </changeSet>

</databaseChangeLog>